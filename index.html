<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

    <title>Ultracycling planner</title>
    <link rel="stylesheet" href="index.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.3/jspdf.min.js"></script>
    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
</head>

<body>
    <header>
        <h1>UC PLANNER</h1>
        <table align="center" style="width:100%">
            <tr>
                <td style="width:100%;text-align: center;">
                    <button class="btn_tour" onclick="crea_tour()">NEW TOUR</button>
                    <button id="btn_load_tour" class="btn_tour" style="display:none;" onclick="cargar_tour_previo()">LOAD A TOUR</button>
                </td>
            </tr>
            <tr>
                <td style="min-width:100%">
                    <table rules="all" style="width:100%;border:1px solid black;">
                        <tr>
                            <td style="width:40%;text-align: center;">
                                <label id="nombre_tour"></label>
                            </td>
                            <td style="width:60%;">
                                <table style="width:100%;background-color: bisque;">
                                    <tr>
                                        <td>
                                            <button id="btn_new_stage" class="btn_prj" onclick="crea_etapa()">NEW STAGE</button>
                                            <button id="btn_load_stage" class="btn_prj" onclick="cargar_etapa_previo()">LOAD STAGE</button>
                                            <button id="btn_backup" class="btn_prj" onclick="backup()">BACKUP</button>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

    </header>
    <main>
        <header id="cabecera">
            <h2 id="nombre_stage"></h2>
            <button id="btn_course_climb" class="btn_course" onclick="insertar_ascenso()">CLIMB</button>
            <button id="btn_course_desc" class="btn_course" onclick="insertar_descenso()">DESCEND</button>
            <button id="btn_course_cp" class="btn_course" onclick="insertar_cp()">Garmin CP</button>
            <button id="btn_course_add" class="btn_course" onclick="insertar_registro()">POI</button>
            <button id="btn_course_imprime" class="btn_imprime" onclick="imprime_pdf()">PDF</button>
        </header>
        <section class="task-list" style="padding: 0px;">
            <div class='div_padre' style="color:black;text-align:center;width:100%;height:100%;">
                <iframe id="frm_tabla" style="width:100%;height:1000px;border:1px solid black;" src=""></iframe>
                <div id="bloqueo"></div>
                <div id="nuevo_poi"><iframe id="frmNuevaVersion" style="width:100%; height:100%"></iframe></div>
                <div id="nuevo_poi_sombra"></div>
            </div>
        </section>
    </main>


    <script src="download.js"></script>
    <script src="funciones.js"></script>
    <script type="text/javascript" src="imprime.js"></script>
    <script src="index.js"></script>
    <script src="./db.js"></script>
    <script>Dexie.debug = true;</script>

    <script>
        //restore('/tours/VELETA 2022.json');
        cargar_tour_previo()
    </script>
</body>